<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
</head>
<link rel="stylesheet" type="text/css" href="css/zc.css">
<body>
	<div class="box">
		<div class="box1">
			<div class="logal">
				<img src="img/3.jpg">
			</div>
			<div class="pic">
				<img src="img/z1.jpg">
			</div>
		</div>
		<div class="box2">
			<div class="rbox">
				<h2>快捷注册</h2>
				<form method="post" action="zc.php">
					<select class="selbox">
						<option>+86</option>
						<option>+24</option>
						<option>+35</option>
						<option>+46</option>
						<input type="text" placeholder="手机号" class="phone" name="ursephone" id="ursephone">
						<span></span>
					</select>
					<div class="num">
						密码：<input class="pass" type="password" name="ursepass" id="ursepass"><span></span>
					</div>
					<div class="num2">
						重复密码：<input class="againpass" type="password" id="againpass">
					</div>
					<a class="dlbox" href="#">
						<p><input id="but1" type="submit"  value="注册" /></p>
					</a>
				</form>
				
				<div class="wz">
					<p>使用以下账号登录:</p>
					<img src="img/z2.jpg">
					<img src="img/z3.jpg">
			    </div>
			</div>
		</div>
		<div class="box3">
	    	<p>Copyright ©2019 北京花旺在线商贸有限公司 Miyabaobei.com 保留一切权利。客服热线： 010-10108088。沪ICP备16004431号-2 </p>
	    </div>
	</div>
</body>
</html>
<script type="text/javascript">
window.onload = function(){
		$("#ursephone").onblur = function(){
		//手机的规则：11位数字，1开头
		var r = /^1[1-9]\d{9}$/;

		if(r.test(this.value)){
			this.nextElementSibling.innerHTML = "√";
			
		}else{
			this.nextElementSibling.innerHTML = "×";
			
		}
	}

	$("#ursepass").onblur = function(){
		//密码的规则：6位数字，不以0开头
		var r = /^[1-9]\d{5}$/;

		if(r.test(this.value)){
			this.nextElementSibling.innerHTML = "√";
		}else{
			this.nextElementSibling.innerHTML = "×";
		}
	}

	$("#againpass").onblur = function(){
		if($("#ursepass").value!=$("#againpass").value){
		alert("密码和重复密码不一致");
		}
	}
	


	// 注册跳转界面
	$("#but1").onclick = function(){
		let xhr = new XMLHttpRequest();
		xhr.open("post","zc.php",true);
		xhr.onreadystatechange = function(){
			if(xhr.readyState ==4 && xhr.status ==200){
				if(xhr.responseText =="1"){
					location.href = "dl.html";
				}else{
					alert("注册失败");
				}
			}
		}
		//4.发送请求
		//如果是post的话，必须设置请求头
		xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");//设置请求头

		xhr.send(`ursephone=${$("#ursephone").value}&ursepass=${$("#ursepass").value}`);//键值对，要跟后端交流的，后端根据键取值
	}




}
  

function $(str){
	if(str.charAt(0)=="#"){
		return document.getElementById(str.substring(1));
	}else if(str.charAt(0)=="."){
		return document.getElementsByClassName(str.substring(1));
	}else{
		return document.getElementsByTagName(str);
	}
}	
</script>